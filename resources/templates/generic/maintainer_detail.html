<rt:extends href="../index.html" />
<rt:block name="teaser"></rt:block>

<rt:block name="title">{$object.name} - openpear</rt:block>

<rt:block name="info"><rt:if param="{$isLogin}">登録していない PHP 開発者が居たら、是非 openpear へ招待してください<rt:else />メンテナーの登録は、今すぐOpenIDで<a href="{$rhaco.url('login')}">ログイン</a>！</rt:if></rt:block>
<rt:block name="contents">
        <h3 class="big"><rt:if param="{$object.fullname}">{$object.fullname}<rt:else />{$object.name}</rt:if></h3>
        
        <ul class="menu">
          <li class="active"><a href="{$rhaco.url('maintainer')}/{$object.name}">profile</a></li>
          <li><a href="{$rhaco.url('maintainer')}/{$object.name}/timeline">timelines</a></li>
        </ul>
        
        <p>Subversion アカウント: {$object.name}</p>
        <p>{$f.noop($of.gravatar($object.mail, 's=80'))}</p>
        <div class="profile">{$f.noop($of.d($object.profile, 'profile'))}</div>

        <h3>timelines</h3>
        <table id="timelines">
        <rt:loop param="recent_changesets" var="changeset">
          <tr class="{$f.evenodd($key)}">
            <td>{$f.dateformat($changeset.date)}</td>
            <td>[<a href="{$rhaco.url('changeset')}/{$changeset.revision}">{$changeset.revision}</a>]</td>
            <td><a href="{$rhaco.url('package')}/{$changeset.factPackage.name}">{$changeset.factPackage.name}</a></td>
            <td>{$f.noop($f.text2html($changeset.log))}</td>
          </tr>
        </rt:loop>
        </table>
        <p class="more"><a href="{$rhaco.url('maintainer')}/{$object.name}/timeline">&raquo; more</a></p>

  <rt:if param="{$object.packages}">
    <h3 class="big"><rt:if param="{$object.fullname}">{$object.fullname}<rt:else />{$object.name}</rt:if> が参加しているパッケージ</h3>
    <?php $object_list = array_chunk($object->packages, 3); ?>
    <rt:loop param="object_list" var="row">
        <rt:loop param="row" var="object">
            <div class="col<rt:if param="{$key}" value="2"> last</rt:if>">
                <h4><a href="{$rhaco.url('package')}/{$object.name}">{$object.name}</a></h4>
                <p>{$f.noop($f.text2html($of.st($of.d($object.description)), 200, 10))}</p>
            </div>
        </rt:loop>
        <br clear="all" />
    </rt:loop>
  </rt:if>
</rt:block>
